<!doctype html>

<html lang="en">
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K4XP97S');</script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8">

  <title>動森大頭菜預測器</title>
  <meta name="description" content="Animal Crossing Turnip Price Forecaster">
  <meta name="author" content="Mike Bryant">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/styles.css?v=1.0">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162470902-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-162470902-1');
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-103936072-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-103936072-2');
  </script>
  
  <style>
    td.highlight{
      background-color: salmon;
    }
  </style>
</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K4XP97S"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class="container">
    <div class="col s12 m5">
      <div class="card-panel z-depth-0">
        <span>
          記錄你的大頭菜價格，數字愈多會愈準確
          <p />
          感謝解包神人 <a href="https://twitter.com/_Ninji/status/1244818665851289602?s=20"></a>
          <p />
          感謝網站原作者 <a href="https://github.com/mikebryant/ac-nh-turnip-prices/issues">Github</a>
        </span>
      </div>
    </div>
    <div class="row">
      <div class="col s12">
        <h5>上週</h5>
        <div class="row">
          <div class="col s4">
            <div class="input-field">
              <select id="previous_pattern" class="track_change">
                <option value="-1" selected>(未知)</option>
                <!-- Choices are ordered by increasing desirability, not code ID order -->
                <option value="2">持續下跌</option>
                <option value="0">波動型</option>
                <option value="3">四期型</option>
                <option value="1">三期型</option>
              </select>
              <label for="previous_pattern">輸入上週走勢</label>
            </div>
          </div>
          <div class="col s6">
            <div class="input-field">
              <span>
                <b>新功能: 輸入上週的走勢有助於分析當期走勢 <em>(選填)</em>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12">
        <h5>本週</h5>
        <div class="row">
          <div class="col s2">
            <div class="input-field">
              <label for="buy">買價</label>
              <input type="number" id="buy" class="track_blur">
            </div>
          </div>
          <div class="col s2">
            <div class="input-field">
              <label>
                <input id="first_buy" type="checkbox" class="filled-in" />
                <span>我是第一次買大頭菜</span>
              </label>
            </div>
          </div>
          <div class="col s6">
            <div class="input-field">
              <span>
                如果你是 <b>創島以來初次買菜</b> 請勾選.
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s2">
        <h6>週一</h6>
        <div class="input-field col s6">
          <label for="sell_2">上午</label>
          <input type="number" id="sell_2" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_3">下午</label>
          <input type="number" id="sell_3" class="track_blur">
        </div>
      </div>
      <div class="col s2">
        <h6>週二</h6>
        <div class="input-field col s6">
          <label for="sell_4">上午</label>
          <input type="number" id="sell_4" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_5">下午</label>
          <input type="number" id="sell_5" class="track_blur">
        </div>
      </div>
      <div class="col s2">
        <h6>週三</h6>
        <div class="input-field col s6">
          <label for="sell_6">上午</label>
          <input type="number" id="sell_6" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_7">下午</label>
          <input type="number" id="sell_7" class="track_blur">
        </div>
      </div>
      <div class="col s2">
        <h6>週四</h6>
        <div class="input-field col s6">
          <label for="sell_8">上午</label>
          <input type="number" id="sell_8" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_9">下午</label>
          <input type="number" id="sell_9" class="track_blur">
        </div>
      </div>
      <div class="col s2">
        <h6>週五</h6>
        <div class="input-field col s6">
          <label for="sell_10">上午</label>
          <input type="number" id="sell_10" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_11">下午</label>
          <input type="number" id="sell_11" class="track_blur">
        </div>
      </div>
      <div class="col s2">
        <h6>週六</h6>
        <div class="input-field col s6">
          <label for="sell_12">上午</label>
          <input type="number" id="sell_12" class="track_blur">
        </div>
        <div class="input-field col s6">
          <label for="sell_13">下午</label>
          <input type="number" id="sell_13" class="track_blur">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12">
        <button id="reset" class="btn-flat btn-small right" name="action">
          清空重填
        </button>
      </div>
    </div>

    <div class="divider"></div>

    <div class="card-panel z-depth-0">
        <span>以下是你的可能走勢 (最低~最高)。 如果查無走勢，可能有值錯誤囉 &#128531;. 下週繼續努力!!</span>
    </div>

    <div class="section">
      <table id="turnipTable" class="highlight">
        <thead>
          <tr>
            <th rowspan="2">走勢</th>
            <th rowspan="2">機率</th>
            <th rowspan="2">週日</th>
            <th colspan="2">週一</th>
            <th colspan="2">週二</th>
            <th colspan="2">週三</th>
            <th colspan="2">週四</th>
            <th colspan="2">週五</th>
            <th colspan="2">週六</th>
            <th rowspan="2">最低</th>
            <th rowspan="2">最高</th>
          </tr>
          <tr>
            <th>上午</th>
            <th>下午</th>
            <th>上午</th>
            <th>下午</th>
            <th>上午</th>
            <th>下午</th>
            <th>上午</th>
            <th>下午</th>
            <th>上午</th>
            <th>下午</th>
            <th>上午</th>
            <th>下午</th>
          </tr>
        </thead>
        <tbody id="output"></tbody>
      </table>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="js/predictions.js"></script>
  <script src="js/scripts.js"></script>
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    $('.track_blur').on('blur', function(){
      var val = parseInt($(this).val(), 10);
      var inputName = $(this).attr('id');
      if (val > 9) {
        // console.log(`send ${inputName} val${val}`)
          gtag('event', inputName, {
          'event_label': val,
          'value': val
        });
      }
    })
    $('.track_change').on('change', function(){
      var val = $(this).val();
      var inputName = $(this).attr('id');
      // console.log(`send ${inputName} val${val}`)
      gtag('event', inputName, {
        'event_label': val,
        'value': val
      });

    })

  </script>
</body>
</html>
